{"version":3,"file":"pages/sokutore.js","sources":["webpack:///./pages/sokutore.vue?38ff","webpack:///./pages/sokutore.vue","webpack:///./pages/sokutore.vue?c7a2","webpack:///./pages/sokutore.vue?2c94","webpack:///./pages/sokutore.vue?f8df","webpack:///./pages/sokutore.vue?9243","webpack:///./pages/sokutore.vue?ec74"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns is-mobile is-centered\",staticStyle:{\"width\":\"100%\",\"height\":\"80%\",\"margin\":\"0\"}},[_vm._ssrNode(\"<div class=\\\"column is-4-tablet is-11-mobile\\\"><div class=\\\"columns is-mobile is-multiline is-centered is-vcentered\\\"><div class=\\\"column is-12 wrapper-content mb-5 tategaki-wrapper\\\"><div\"+(_vm._ssrClass(\"tategaki pt-3 pb-1\",_vm.fontsize))+\">\"+(_vm._ssrList((3),function(i){return (\"<div class=\\\"trimmed-wrapper\\\"><span\"+(_vm._ssrStyle(null,_vm.highlightStyle[(i - 1) * 2], null))+\">\"+_vm._ssrEscape(_vm._s(_vm.firstLetter[_vm.page + (i - 1)]))+\"</span> <span>\"+_vm._ssrEscape(_vm._s(_vm.trimmed[_vm.page + (i - 1)]))+\"</span> <span\"+(_vm._ssrStyle(null,_vm.highlightStyle[(i - 1) * 2 + 1], null))+\">\"+_vm._ssrEscape(_vm._s(_vm.lastLetter[_vm.page + (i - 1)]))+\"</span></div>\")}))+\"</div> <div class=\\\"is-size-7 has-text-centered\\\">\"+_vm._ssrEscape(_vm._s((_vm.page / 3 + 1) +'/'+_vm.length))+\"</div></div> <div class=\\\"column is-12 wrapper-content\\\"><div class=\\\"columns is-mobile is-vcentered\\\"><div class=\\\"column is-6 has-text-left\\\"><span id=\\\"sokutore_button\\\" class=\\\"p-2 is-size-7\\\">&lt; 次へ</span></div> <div class=\\\"column is-6 has-text-right\\\"><span id=\\\"sokutore_button\\\" class=\\\"p-2 is-size-7\\\">最初に戻る &gt;|</span></div></div></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  layout: 'defaultContent',\n  data () {\n    return {\n      bookTitle: '',\n      body: '',\n      trimmed: [],\n      firstLetter: [],\n      lastLetter: [],\n      highlightStyle: [],\n      intervalId: undefined,\n      length: '',\n      page: '',\n      fontsize: '',\n      speed: 50\n    }\n  },\n  async mounted () {\n    this.speed = this.$store.state.data.sokutoreSpeed/* スピードをvuexから取得します。 */\n    /* 文字サイズを設定します。 */\n    if (this.$store.state.data.fontsize === 'small') {\n      this.fontsize = 'is-size-8-sokutore'\n    } else if (this.$store.state.data.fontsize === 'medium') {\n      this.fontsize = 'is-size-7-sokutore'\n    } else {\n      this.fontsize = 'is-size-6-sokutore'\n    }\n    const bookList = this.$store.state.data.bookList.concat(this.$store.state.data.userBookList)\n    const bookContent = this.$store.state.data.bookContent.concat(this.$store.state.data.userBookContent)\n    this.bookTitle = bookList[this.$store.state.data.bookIndex]\n    this.body = bookContent[this.$store.state.data.bookIndex]\n    this.$nuxt.$emit('updateRef', 'sokutore-top')/* navbarの戻るボタンの遷移先の受け渡し */\n    this.$nuxt.$emit('updateTitle', this.bookTitle)/* navbarのタイトルの受け渡し */\n    /* 本の中身を40文字ずつに分割します */\n    for (let i = 0; i < this.body.length / 40; i++) {\n      if (i === Math.floor(this.body.length / 40)) {\n        this.firstLetter.push(this.body.charAt(i * 40))\n        this.trimmed.push(this.body.slice(i * 40 + 1, this.body.length - 1))\n        this.lastLetter.push(this.body.charAt(this.body.length - 1))\n      } else {\n        this.firstLetter.push(this.body.charAt(i * 40))\n        this.trimmed.push(this.body.slice(i * 40 + 1, (i + 1) * 40 - 1))\n        this.lastLetter.push(this.body.charAt((i + 1) * 40 - 1))\n      }\n    }\n    /* 全ページ数と現在ページの表示を設定します。 */\n    this.page = this.$store.state.data.bookPages[this.$store.state.data.bookIndex][1]\n    this.length = Math.ceil(this.trimmed.length / 3)\n    /* 最初のページのハイライト表示を開始します。 */\n    this.highlight()\n  },\n  destroyed () {\n    clearInterval(this.intervalId)\n  },\n  methods: {\n    nextPage () {\n      if (this.$store.state.data.bookPages[this.$store.state.data.bookIndex][1] / 3 < this.length - 1) {\n        this.$store.commit('data/changePage', 1)\n        this.page = this.$store.state.data.bookPages[this.$store.state.data.bookIndex][1]\n        this.highlight()\n      }\n    },\n    goTopPage () {\n      clearInterval(this.intervalId)\n      this.isPlay = false\n      this.$store.commit('data/goTopPage', 1)\n      this.page = this.$store.state.data.bookPages[this.$store.state.data.bookIndex][1]\n      this.highlight()\n    },\n    highlight () {\n      /* ハイライトの初期表示を設定します。 */\n      let n = 0\n      let limit = 0\n      this.highlightStyle = []\n      clearInterval(this.intervalId)\n      for (let i = 0; i < 3; i++) {\n        if (this.firstLetter[this.page + i] !== undefined) {\n          limit += 2\n        } else {\n          break\n        }\n      }\n      for (let i = 0; i < limit; i++) {\n        this.highlightStyle.push({ background: 'none' })\n      }\n      this.highlightStyle[0].background = 'yellow'\n      /* ハイライトの移動処理を開始します。 */\n      this.intervalId = setInterval(() => {\n        if (n < limit - 1) {\n          for (let i = 0; i < limit; i++) {\n            if (i === n + 1) {\n              this.highlightStyle[i].background = 'yellow'\n            } else {\n              this.highlightStyle[i].background = 'none'\n            }\n          }\n          n++\n        }\n      }, -100 * this.speed + 10100)\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./sokutore.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./sokutore.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sokutore.vue?vue&type=template&id=d98ef3a2&\"\nimport script from \"./sokutore.vue?vue&type=script&lang=js&\"\nexport * from \"./sokutore.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./sokutore.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"5e87f8e2\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./sokutore.vue?vue&type=style&index=0&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"43c73608\", content, true, context)\n};","export * from \"-!../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./sokutore.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".tategaki-wrapper{align-items:center}.tategaki,.tategaki-wrapper{display:flex;flex-flow:column}.tategaki{-ms-writing-mode:tb-rl;-ms-writing-mode:vertical-rl;-moz-writing-mode:vertical-rl;writing-mode:vertical-rl;height:50vh;letter-spacing:.3em}.trimmed-wrapper span{padding:.3em}.trimmed-wrapper span:first-child{z-index:1;text-align:center;border-radius:50%;letter-spacing:0}.trimmed-wrapper span:nth-child(2){z-index:2;margin-top:-.9em;margin-bottom:-1.2em}.trimmed-wrapper span:nth-child(3){z-index:1;text-align:center;border-radius:50%;letter-spacing:0}.wrapper-content{border-radius:4px;background:#fff}#sokutore_button{border:.5px solid #3362a8;color:#3362a8;border-radius:8px}.is-size-6-sokutore,.is-size-7-sokutore,.is-size-8-sokutore{font-size:.5em;line-height:6em}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AA9CA;AAtDA;;AC1BA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}